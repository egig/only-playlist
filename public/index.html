<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>testapp</title>
    <link rel="stylesheet" href="/css/drafterbit-bootstrap.css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>

  <div id="playlistNav"></div>
  <div id="content"></div>

    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"> </script>
    <script type="text/javascript" src="/bower_components/navigo/lib/navigo.min.js"> </script>
    <script type="text/javascript" src="/bower_components/nunjucks/browser/nunjucks.min.js"> </script>
    <script type="text/javascript">
    // configuration
    nunjucks.configure('/_tpl');
    var router = new Navigo();

    router.on({
        '/playlist/:id': function (param) {

            $.get('/api/playlist/'+param.id+'/tracks', function(tracks) {
                console.log(tracks);
            });
        },
        '/': function() {
            $('#content').html('home');
        }
    });
    router.resolve();

    // @todo: Home vs not Found
    // Similiar problem https://github.com/krasimir/navigo/issues/31
    // router.on(function(){
    //    $('body').html("Not found");
    // });

    // request playlists
    // @todo configure base path
    $.get('/api/playlists', function(playlists) {
        var plNav = nunjucks.render('playlist-nav.html', {playlists: playlists});
        $(playlistNav).html(plNav);

        router.updatePageLinks();
    });
    </script>

  </body>
</html>
